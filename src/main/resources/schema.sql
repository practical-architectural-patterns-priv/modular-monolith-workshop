CREATE TABLE submissions (
     id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
     user_id VARCHAR(64) NOT NULL,
     url VARCHAR(255) NOT NULL,
     created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE analysis_results (
      id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
      submission_id BIGINT NOT NULL,
      maintainability_score INT NOT NULL,
      complexity_score INT NOT NULL,
      duplication_score INT NOT NULL,
      solid_violations INT NOT NULL,
      FOREIGN KEY (submission_id) REFERENCES submissions(id)
);

CREATE TABLE points_ledger (
       id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
       user_id VARCHAR(64) NOT NULL,
       submission_id BIGINT NOT NULL,
       points INT NOT NULL,
       awarded_at TIMESTAMP NOT NULL,
       FOREIGN KEY (submission_id) REFERENCES submissions(id)
);

CREATE TABLE leaderboard (
     user_id VARCHAR(64) PRIMARY KEY,
     total_points INT NOT NULL
);